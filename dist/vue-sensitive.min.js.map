{"version":3,"file":"vue-sensitive.min.js","sources":["../src/utils/full-name.js","../src/lib/weaken.js","../src/lib/mixin.js","../src/utils/tele-phone.js","../src/utils/e-mail.js","../src/utils/card-id.js","../src/utils/bank-card.js","../vue-sensitive.js"],"sourcesContent":["// 中文姓名脱敏规则\r\nconst surname = [\r\n  '欧阳', '太史', '端木', '上官', '司马', '东方',\r\n  '独孤', '南宫', '万俟', '闻人', '夏侯', '诸葛',\r\n  '尉迟', '公羊', '赫连', '澹台', '皇甫', '宗政',\r\n  '濮阳', '公冶', '太叔', '申屠', '公孙', '慕容',\r\n  '仲孙', '钟离', '长孙', '宇文', '城池', '司徒',\r\n  '鲜于', '司空', '汝嫣', '闾丘', '子车', '亓官',\r\n  '司寇', '巫马', '公西', '颛孙', '壤驷', '公良',\r\n  '漆雕', '乐正', '宰父', '谷梁', '拓跋', '夹谷',\r\n  '轩辕', '令狐', '段干', '百里', '呼延', '东郭',\r\n  '南门', '羊舌', '微生', '公户', '公玉', '公仪',\r\n  '梁丘', '公仲', '公上', '公门', '公山', '公坚',\r\n  '左丘', '公伯', '西门', '公祖', '第五', '公乘',\r\n  '贯丘', '公皙', '南荣', '东里', '东宫', '仲长',\r\n  '子书', '子桑', '即墨', '达奚', '褚师'];\r\n\r\nexport default function fullName (val) {\r\n  let star = '';\r\n  // 名字是两位，取姓名首位+*\r\n  if (val.length <= 2) {\r\n    return `${val.substring(0, 1)}*`;\r\n  }\r\n  // 名字存在复姓，去复姓+*, 复姓 + * +名\r\n  if (surname.indexOf(val.substring(0, 2)) > -1) {\r\n    star = `${val.substring(0, 2)}`;\r\n    if (val.length === 3) {\r\n      return `${star}*`;\r\n    }\r\n    if (val.length > 3) {\r\n      for (let i = 0; i < val.length - 3; i++) {\r\n        star += '*';\r\n      }\r\n      return star + val.substring(val.length - 1, val.length);\r\n    }\r\n  }\r\n  // 名字不存在复姓，姓名+*\r\n  if (surname.indexOf(val.substring(0, 2)) < 0) {\r\n    for (let i = 0; i < val.length - 2; i++) {\r\n      star += '*';\r\n    }\r\n    return val.substring(0, 1) + star + val.substring(val.length - 1, val.length);\r\n  }\r\n}\r\n","// 公共函数 弱化字符串\r\n// str     需要处理的字符串\r\n// start   保留的前几位\r\n// end     保留的后几位\r\n// char    替换的字符串\r\nexport default function weaken (str, start, end, char) {\r\n  const size = str.length - start - end;\r\n  let middleStr = '';\r\n  for (let i = 0; i < size; i++) {\r\n    middleStr += char;\r\n  }\r\n  const leftStr = str.substring(0, start);\r\n  const rightStr = str.substring(str.length - end);\r\n  const newStr = leftStr + middleStr + rightStr;\r\n  return newStr;\r\n}\r\n","import fullName from '../utils/full-name';\r\nimport eMail from '../utils/e-mail';\r\nimport telePhone from '../utils/tele-phone';\r\nimport cardId from '../utils/card-id';\r\nimport bankCard from '../utils/bank-card';\r\n\r\nexport default {\r\n  created () {\r\n    this.hideVal();\r\n  },\r\n  methods: {\r\n    // 回显&复制\r\n    copyText (events) {\r\n      // 回显\r\n      events.target.innerText = this.val;\r\n      // 复制\r\n      const copyipt = document.createElement('input');\r\n      copyipt.setAttribute('value', this.val);\r\n      document.body.appendChild(copyipt);\r\n      copyipt.select();\r\n      document.execCommand('copy');\r\n      document.body.removeChild(copyipt);\r\n    },\r\n    // 脱敏\r\n    hideVal () {\r\n      switch (this.category) {\r\n        case 'name':\r\n          this.text = fullName(this.val);\r\n          break;\r\n        case 'phone':\r\n          this.text = telePhone(this.val);\r\n          break;\r\n        case 'email':\r\n          this.text = eMail(this.val);\r\n          break;\r\n        case 'card':\r\n          this.text = cardId(this.val);\r\n          break;\r\n        default:\r\n          this.text = bankCard(this.val);\r\n      }\r\n    },\r\n  },\r\n};\r\n","import weaken from '../lib/weaken';\r\n\r\n// 手机号、固定电话脱敏\r\nexport default function telePhone (val) {\r\n  // 11位手机号码\r\n  if (val.length === 11) {\r\n    return val.replace(/(\\d{3})\\d{4}(\\d{4})/, '$1****$2');\r\n  }\r\n  // 固定电话\r\n  if (val.length !== 11) {\r\n    return weaken(val, 3, 4, '*');\r\n  }\r\n}\r\n","// 邮箱地址脱敏\r\nexport default function eMail (val) {\r\n  if (val.indexOf('@') > 0) {\r\n    let email = '';\r\n    const str = val.split('@');\r\n    let result = '';\r\n    if (str[0].length > 3) {\r\n      for (let i = 0; i < str[0].length - 3; i++) {\r\n        result += '*';\r\n      }\r\n    }\r\n    email = `${str[0].substring(0, 3) + result}@${str[1]}`;\r\n    return email;\r\n  }\r\n}\r\n","import weaken from '../lib/weaken';\r\n\r\n// 身份证号脱敏\r\nexport default function cardId (val) {\r\n  // 15、18位身份证号\r\n  // 第一代身份证15位，第二代身份证18位\r\n  if (val.length === 15) {\r\n    // 前六后三不脱敏，中间脱敏\r\n    return weaken(val, 6, 3, '*');\r\n  }\r\n  if (val.length === 18) {\r\n    // 前六后四不脱敏，中间脱敏\r\n    return weaken(val, 6, 4, '*');\r\n  }\r\n}\r\n","// 银行卡号脱敏\r\nexport default function bankCard (val) {\r\n  // 15、16、17、19位银行卡号\r\n  // 中国银行账号借记卡19位，对公帐户18位，个人帐户17位，一本通15位，老卡12位\r\n  if (val.length > 12) {\r\n    return val.replace(/^(.{4})(?:\\d+)(.{4})$/, '$1 **** **** $2');\r\n  }\r\n}\r\n","import mixin from './src/lib/mixin';\r\n\r\nconst Sensitive = {\r\n  install (Vue) {\r\n    if (typeof window !== 'undefined' && window.Vue) {\r\n      Vue = window.Vue;\r\n    }\r\n    const Text = Vue.extend({\r\n      props: ['val', 'category'],\r\n      data () {\r\n        return {\r\n          text: null,\r\n        };\r\n      },\r\n      template: `<span @click=\"copyText\" @mouseout.native=\"hideVal\">{{text}}</span>`,\r\n      mixins: [mixin],\r\n    });\r\n    Vue.component('Sensitive', Text);\r\n  },\r\n};\r\n\r\nexport default Sensitive;\r\n\r\n"],"names":["surname","weaken","str","start","end","char","size","length","middleStr","i","substring","hideVal","events","target","innerText","this","val","copyipt","document","createElement","setAttribute","body","appendChild","select","execCommand","removeChild","category","text","star","indexOf","fullName","replace","split","result","eMail","cardId","bankCard","Vue","window","Text","extend","mixin","component"],"mappings":"wLACA,IAAMA,GACJ,KAAM,KAAM,KAAM,KAAM,KAAM,KAC9B,KAAM,KAAM,KAAM,KAAM,KAAM,KAC9B,KAAM,KAAM,KAAM,KAAM,KAAM,KAC9B,KAAM,KAAM,KAAM,KAAM,KAAM,KAC9B,KAAM,KAAM,KAAM,KAAM,KAAM,KAC9B,KAAM,KAAM,KAAM,KAAM,KAAM,KAC9B,KAAM,KAAM,KAAM,KAAM,KAAM,KAC9B,KAAM,KAAM,KAAM,KAAM,KAAM,KAC9B,KAAM,KAAM,KAAM,KAAM,KAAM,KAC9B,KAAM,KAAM,KAAM,KAAM,KAAM,KAC9B,KAAM,KAAM,KAAM,KAAM,KAAM,KAC9B,KAAM,KAAM,KAAM,KAAM,KAAM,KAC9B,KAAM,KAAM,KAAM,KAAM,KAAM,KAC9B,KAAM,KAAM,KAAM,KAAM,MCV1B,SAAwBC,EAAQC,EAAKC,EAAOC,EAAKC,WACzCC,EAAOJ,EAAIK,OAASJ,EAAQC,EAC9BI,EAAY,GACPC,EAAI,EAAGA,EAAIH,EAAMG,OACXJ,SAECH,EAAIQ,UAAU,EAAGP,GAERK,EADRN,EAAIQ,UAAUR,EAAIK,OAASH,kCCJrCO,sCAIKC,KAEDC,OAAOC,UAAYC,KAAKC,QAEzBC,EAAUC,SAASC,cAAc,WAC/BC,aAAa,QAASL,KAAKC,cAC1BK,KAAKC,YAAYL,KAClBM,kBACCC,YAAY,iBACZH,KAAKI,YAAYR,8BAIlBF,KAAKW,cACN,YACEC,KFVf,SAAkCX,OAC5BY,EAAO,MAEPZ,EAAIT,QAAU,SACNS,EAAIN,UAAU,EAAG,UAGzBV,EAAQ6B,QAAQb,EAAIN,UAAU,EAAG,KAAO,EAAG,SACnCM,EAAIN,UAAU,EAAG,GACR,IAAfM,EAAIT,cACIqB,SAERZ,EAAIT,OAAS,EAAG,KACb,IAAIE,EAAI,EAAGA,EAAIO,EAAIT,OAAS,EAAGE,OAC1B,WAEHmB,EAAOZ,EAAIN,UAAUM,EAAIT,OAAS,EAAGS,EAAIT,YAIhDP,EAAQ6B,QAAQb,EAAIN,UAAU,EAAG,IAAM,EAAG,KACvC,IAAID,EAAI,EAAGA,EAAIO,EAAIT,OAAS,EAAGE,OAC1B,WAEHO,EAAIN,UAAU,EAAG,GAAKkB,EAAOZ,EAAIN,UAAUM,EAAIT,OAAS,EAAGS,EAAIT,SEdpDuB,CAASf,KAAKC,eAEvB,aACEW,KCzBM,MAFcX,ED2BHD,KAAKC,KCzB3BT,OACCS,EAAIe,QAAQ,sBAAuB,YAGzB,KAAff,EAAIT,OACCN,EAAOe,EAAK,EAAG,EAAG,sBDsBhB,aACEW,KEhCf,SAA+BX,MACzBA,EAAIa,QAAQ,KAAO,EAAG,KAElB3B,EAAMc,EAAIgB,MAAM,KAClBC,EAAS,MACT/B,EAAI,GAAGK,OAAS,MACb,IAAIE,EAAI,EAAGA,EAAIP,EAAI,GAAGK,OAAS,EAAGE,OAC3B,WAGHP,EAAI,GAAGQ,UAAU,EAAG,GAAKuB,MAAU/B,EAAI,IFsBhCgC,CAAMnB,KAAKC,eAEpB,YACEW,KGjCf,SAAgCX,UAGX,KAAfA,EAAIT,OAECN,EAAOe,EAAK,EAAG,EAAG,KAER,KAAfA,EAAIT,OAECN,EAAOe,EAAK,EAAG,EAAG,YHwBPmB,CAAOpB,KAAKC,wBAGnBW,KItCf,SAAkCX,MAG5BA,EAAIT,OAAS,UACRS,EAAIe,QAAQ,wBAAyB,mBJkC1BK,CAASrB,KAAKC,KCpCpC,IAAmCA,6BIAxBqB,GACe,oBAAXC,QAA0BA,OAAOD,QACpCC,OAAOD,SAETE,EAAOF,EAAIG,eACP,MAAO,wCAGL,6FAIDC,OAEPC,UAAU,YAAaH"}