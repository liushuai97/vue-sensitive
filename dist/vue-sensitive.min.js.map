{"version":3,"file":"vue-sensitive.min.js","sources":["../src/utils/name.js","../src/lib/weaken.js","../vue-sensitive.js","../src/utils/phone.js","../src/utils/email.js","../src/utils/card.js","../src/utils/bank.js"],"sourcesContent":["// 中文姓名脱敏规则\r\nconst surname = [\r\n  '欧阳', '太史', '端木', '上官', '司马', '东方',\r\n  '独孤', '南宫', '万俟', '闻人', '夏侯', '诸葛',\r\n  '尉迟', '公羊', '赫连', '澹台', '皇甫', '宗政',\r\n  '濮阳', '公冶', '太叔', '申屠', '公孙', '慕容',\r\n  '仲孙', '钟离', '长孙', '宇文', '城池', '司徒',\r\n  '鲜于', '司空', '汝嫣', '闾丘', '子车', '亓官',\r\n  '司寇', '巫马', '公西', '颛孙', '壤驷', '公良',\r\n  '漆雕', '乐正', '宰父', '谷梁', '拓跋', '夹谷',\r\n  '轩辕', '令狐', '段干', '百里', '呼延', '东郭',\r\n  '南门', '羊舌', '微生', '公户', '公玉', '公仪',\r\n  '梁丘', '公仲', '公上', '公门', '公山', '公坚',\r\n  '左丘', '公伯', '西门', '公祖', '第五', '公乘',\r\n  '贯丘', '公皙', '南荣', '东里', '东宫', '仲长',\r\n  '子书', '子桑', '即墨', '达奚', '褚师'];\r\n\r\nexport default function name (val) {\r\n  let star = '';\r\n  // 名字是两位，取姓名首位+*\r\n  if (val.length <= 2) {\r\n    return `${val.substring(0, 1)}*`;\r\n  }\r\n  // 名字存在复姓，去复姓+*, 复姓 + * +名\r\n  if (surname.indexOf(val.substring(0, 2)) > 0) {\r\n    star = `${val.substring(0, 2)}`;\r\n    if (val.length === 3) {\r\n      return `${star}*`;\r\n    }\r\n    if (val.length > 3) {\r\n      for (let i = 0; i < val.length - 3; i++) {\r\n        star += '*';\r\n      }\r\n      return star + val.substring(val.length - 1, val.length);\r\n    }\r\n  }\r\n  // 名字不存在复姓，姓名+*\r\n  if (surname.indexOf(val.substring(0, 2)) < 0) {\r\n    for (let i = 0; i < val.length - 2; i++) {\r\n      star += '*';\r\n    }\r\n    return val.substring(0, 1) + star + val.substring(val.length - 1, val.length);\r\n  }\r\n}\r\n","// 公共函数 弱化字符串\r\n// str     需要处理的字符串\r\n// start   保留的前几位\r\n// end     保留的后几位\r\n// char    替换的字符串\r\nexport default function weaken (str, start, end, char) {\r\n  const size = str.length - start - end;\r\n  let middleStr = '';\r\n  for (let i = 0; i < size; i++) {\r\n    middleStr += char;\r\n  }\r\n  const leftStr = str.substring(0, start);\r\n  const rightStr = str.substring(str.length - end);\r\n  const newStr = leftStr + middleStr + rightStr;\r\n  return newStr;\r\n}\r\n","import name from './src/utils/name';\nimport phone from './src/utils/phone';\nimport email from './src/utils/email';\nimport card from './src/utils/card';\nimport bank from './src/utils/bank';\n\nmodule.exports = {\n  install (Vue) {\n    Vue.component('sensitive', {\n      props: {\n        val: {\n          type: String,\n          required: true,\n        },\n        type: {\n          type: String,\n          required: true,\n        },\n      },\n      computed: {\n        text: () => {\n          this.hideVal();\n        },\n      },\n      template: `<span @click=\"copyText\" @mouseout=\"hideVal\">{{text}}</span>`,\n      methods: {\n        // 回显&复制\n        copyText (events) {\n          // 回显\n          events.target.innerText = this.val;\n          // 复制\n          const copyipt = document.createElement('input');\n          copyipt.setAttribute('value', this.val);\n          document.body.appendChild(copyipt);\n          copyipt.select();\n          document.execCommand('copy');\n          document.removeChild(copyipt);\n        },\n        // 脱敏\n        hideVal () {\n          switch (this.type) {\n            case 'name':\n              name(this.val);\n              break;\n            case 'phone':\n              phone(this.val);\n              break;\n            case 'email':\n              email(this.val);\n              break;\n            case 'card':\n              card(this.val);\n              break;\n            default:\n              bank(this.val);\n          }\n        },\n      },\n    });\n  },\n};\n","import weaken from '../lib/weaken';\r\n\r\n// 手机号、固定电话脱敏\r\nexport default function phone (val) {\r\n  // 11位手机号码\r\n  if (val.length === 11) {\r\n    return val.replace(/(\\d{3})\\d{4}(\\d{4})/, '$1****$2');\r\n  }\r\n  // 固定电话\r\n  if (val.length !== 11) {\r\n    return weaken(val, 3, 4, '*');\r\n  }\r\n}\r\n","// 邮箱地址脱敏\r\nexport default function emial (val) {\r\n  if (val.indexOf('@') > 0) {\r\n    let email = '';\r\n    const str = val.split('@');\r\n    let result = '';\r\n    if (str[0].length > 3) {\r\n      for (let i = 0; i < str[0].length - 3; i++) {\r\n        result += '*';\r\n      }\r\n    }\r\n    email = `${str[0].substring(0, 3) + result}@${str[1]}`;\r\n    return email;\r\n  }\r\n}\r\n","import weaken from '../lib/weaken';\r\n\r\n// 身份证号脱敏\r\nexport default function card (val) {\r\n  // 15、18位身份证号\r\n  // 第一代身份证15位，第二代身份证18位\r\n  if (val.length === 15) {\r\n    // 前六后三不脱敏，中间脱敏\r\n    return weaken(val, 6, 3, '*');\r\n  }\r\n  if (val.length === 18) {\r\n    // 前六后四不脱敏，中间脱敏\r\n    return weaken(val, 6, 4, '*');\r\n  }\r\n}\r\n","// 银行卡号脱敏\r\nexport default function bank (val) {\r\n  // 15、16、17、19位银行卡号\r\n  // 中国银行账号借记卡19位，对公帐户18位，个人帐户17位，一本通15位，老卡12位\r\n  if (val.length > 12) {\r\n    return val.replace(/^(.{4})(?:\\d+)(.{4})$/, '$1 **** **** $2');\r\n  }\r\n}\r\n"],"names":["surname","weaken","str","start","end","char","size","length","middleStr","i","substring","exports","Vue","component","String","hideVal","events","target","innerText","this","val","copyipt","document","createElement","setAttribute","body","appendChild","select","execCommand","removeChild","type","star","indexOf","replace","split","result"],"mappings":"uJACA,IAAMA,GACJ,KAAM,KAAM,KAAM,KAAM,KAAM,KAC9B,KAAM,KAAM,KAAM,KAAM,KAAM,KAC9B,KAAM,KAAM,KAAM,KAAM,KAAM,KAC9B,KAAM,KAAM,KAAM,KAAM,KAAM,KAC9B,KAAM,KAAM,KAAM,KAAM,KAAM,KAC9B,KAAM,KAAM,KAAM,KAAM,KAAM,KAC9B,KAAM,KAAM,KAAM,KAAM,KAAM,KAC9B,KAAM,KAAM,KAAM,KAAM,KAAM,KAC9B,KAAM,KAAM,KAAM,KAAM,KAAM,KAC9B,KAAM,KAAM,KAAM,KAAM,KAAM,KAC9B,KAAM,KAAM,KAAM,KAAM,KAAM,KAC9B,KAAM,KAAM,KAAM,KAAM,KAAM,KAC9B,KAAM,KAAM,KAAM,KAAM,KAAM,KAC9B,KAAM,KAAM,KAAM,KAAM,MCV1B,SAAwBC,EAAQC,EAAKC,EAAOC,EAAKC,WACzCC,EAAOJ,EAAIK,OAASJ,EAAQC,EAC9BI,EAAY,GACPC,EAAI,EAAGA,EAAIH,EAAMG,OACXJ,SAECH,EAAIQ,UAAU,EAAGP,GAERK,EADRN,EAAIQ,UAAUR,EAAIK,OAASH,UCNvCO,0BACIC,gBACHC,UAAU,8BAGFC,iBACI,cAGJA,iBACI,mBAIN,aACCC,8GAMGC,KAEDC,OAAOC,UAAYC,KAAKC,QAEzBC,EAAUC,SAASC,cAAc,WAC/BC,aAAa,QAASL,KAAKC,cAC1BK,KAAKC,YAAYL,KAClBM,kBACCC,YAAY,iBACZC,YAAYR,8BAIbF,KAAKW,UACN,QFxBjB,SAA8BV,OACxBW,EAAO,MAEPX,EAAIb,QAAU,SACNa,EAAIV,UAAU,EAAG,UAGzBV,EAAQgC,QAAQZ,EAAIV,UAAU,EAAG,IAAM,EAAG,SAClCU,EAAIV,UAAU,EAAG,GACR,IAAfU,EAAIb,cACIwB,SAERX,EAAIb,OAAS,EAAG,KACb,IAAIE,EAAI,EAAGA,EAAIW,EAAIb,OAAS,EAAGE,OAC1B,WAEHsB,EAAOX,EAAIV,UAAUU,EAAIb,OAAS,EAAGa,EAAIb,YAIhDP,EAAQgC,QAAQZ,EAAIV,UAAU,EAAG,IAAM,EAAG,KACvC,IAAID,EAAI,EAAGA,EAAIW,EAAIb,OAAS,EAAGE,OAC1B,IAEHW,EAAIV,UAAU,EAAG,GAAYU,EAAIV,UAAUU,EAAIb,OAAS,EAAGa,EAAIb,UECvDY,KAAKC,eAEP,QCvCI,MAFUA,ED0CXD,KAAKC,KCxCfb,OACCa,EAAIa,QAAQ,sBAAuB,YAGzB,KAAfb,EAAIb,QACCN,EAAOmB,EAAK,EAAG,EAAG,eDqCZ,SE9CjB,SAA+BA,MACzBA,EAAIY,QAAQ,KAAO,EAAG,KAElB9B,EAAMkB,EAAIc,MAAM,KAClBC,EAAS,MACTjC,EAAI,GAAGK,OAAS,MACb,IAAIE,EAAI,EAAGA,EAAIP,EAAI,GAAGK,OAAS,EAAGE,OAC3B,IAGHP,EAAI,GAAGQ,UAAU,EAAG,GAAeR,EAAI,KFqClCiB,KAAKC,eAER,QG/CjB,SAA8BA,GAGT,KAAfA,EAAIb,OAECN,EAAOmB,EAAK,EAAG,EAAG,KAER,KAAfA,EAAIb,QAECN,EAAOmB,EAAK,EAAG,EAAG,MHuCVD,KAAKC,oBIlDxB,SAA8BA,MAGxBA,EAAIb,OAAS,GACRa,EAAIa,QAAQ,wBAAyB,oBJiD7Bd,KAAKC,KCnDxB,IAA+BA"}